<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apresentação VISA Digital - Versão Final</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            --bg-main: #f0f7ff;
            --bg-primary: rgba(255, 255, 255, 0.85);
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --border-color: rgba(0, 0, 0, 0.08);
            --accent-green: #00A859;
            --accent-blue: #0077C0;
            --accent-orange: #F39200;
            --toolbar-bg: rgba(255, 255, 255, 0.7);
            --button-hover-bg: rgba(0, 0, 0, 0.05);
            --primary-blue: #1e3a8a;
            --secondary-blue: #3b82f6;
        }

        .dark {
            --bg-main: #0f172a;
            --bg-primary: rgba(15, 23, 42, 0.85);
            --text-primary: #f7fafc;
            --text-secondary: #a0aec0;
            --border-color: rgba(255, 255, 255, 0.1);
            --accent-green: #38A169;
            --accent-blue: #3182CE;
            --accent-orange: #DD6B20;
            --toolbar-bg: rgba(15, 23, 42, 0.7);
            --button-hover-bg: rgba(255, 255, 255, 0.08);
            --primary-blue: #60a5fa;
            --secondary-blue: #93c5fd;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--text-secondary);
            background-color: var(--bg-main);
            background-image: linear-gradient(135deg, #e6f0ff 0%, #f0f7ff 100%);
            overflow: hidden;
            transition: background-color 0.3s;
        }

        body.dark {
            background-image: linear-gradient(135deg, #0c1b33 0%, #0f172a 100%);
        }

        #app-container {
            background-color: var(--bg-primary);
            backdrop-filter: blur(32px) saturate(180%);
            border: 1px solid var(--border-color);
            transition: background-color 0.3s, border-color 0.3s;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }
        
        #app-container:fullscreen {
             background-color: var(--bg-main);
             background-image: linear-gradient(135deg, #e6f0ff 0%, #f0f7ff 100%);
             backdrop-filter: none;
        }
        
        .dark #app-container:fullscreen {
            background-color: var(--bg-main);
            background-image: linear-gradient(135deg, #0c1b33 0%, #0f172a 100%);
        }

        #presentation-viewport {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        #presentation-shell {
            width: 1280px;
            height: 720px;
            position: relative;
            transform-origin: center center;
            transition: transform 0.3s ease-out;
        }

        .slide {
            opacity: 0;
            transform: scale(0.98);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem 4rem;
            text-align: center;
            pointer-events: none;
        }

        .slide.active {
            opacity: 1;
            transform: scale(1);
            z-index: 10;
            pointer-events: auto;
        }
        
        .slide-content {
            width: 100%;
            max-width: 1050px;
        }
        
        .bento-card {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
        }
        
        .bento-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        
        .slide.active .animate-on-scroll {
            opacity: 1;
            transform: translateY(0);
        }

        .gradient-text {
            background: linear-gradient(45deg, var(--primary-blue), var(--secondary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .logo-gov-footer {
             filter: brightness(0.1);
        }

        .dark .logo-gov-footer {
             filter: brightness(1);
        }

    </style>
</head>
<body class="flex items-center justify-center h-screen p-4">

    <div id="app-container" class="relative w-full h-full max-w-7xl rounded-2xl overflow-hidden">
        
        <main id="presentation-viewport" class="w-full h-full">
            <div id="presentation-shell">
                <div id="presentation-container" class="relative w-full h-full">
                
                    <!-- Slide 1: Capa -->
                    <div class="slide">
                        <div class="slide-content relative z-10 flex items-center justify-between">
                            <div class="text-left">
                                <img src="https://raw.githubusercontent.com/leonardomverona/visa-digital/main/logo-color.svg" alt="Logo VISA Digital" class="h-28 mb-6 animate-on-scroll">
                                <p class="text-xl md:text-2xl text-[var(--text-secondary)] animate-on-scroll" style="transition-delay: 200ms;">Inovação e Eficiência na Vigilância Sanitária de Minas Gerais</p>
                                <blockquote class="mt-8 italic text-lg text-[var(--text-secondary)] opacity-75 max-w-xl animate-on-scroll" style="transition-delay: 300ms;">
                                    "Comece pequeno, pense grande. Não se preocupe com muitas coisas ao mesmo tempo. Pegue um punhado de coisas simples para começar e progrida para outras mais complexas. Pense não apenas no amanhã, mas no futuro."
                                    <footer class="mt-2 text-sm not-italic">- Steve Jobs</footer>
                                </blockquote>
                            </div>
                            <div class="animate-on-scroll" style="transition-delay: 400ms;">
                                 <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://leonardomverona.github.io/visa-digital/" alt="QR Code para o site VISA Digital" class="rounded-lg shadow-lg">
                                 <p class="text-xs mt-2 text-[var(--text-secondary)]">Acesse o projeto</p>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 2: Contextualização -->
                    <div class="slide">
                        <div class="slide-content">
                            <p class="font-semibold text-[var(--accent-blue)] mb-2 animate-on-scroll">CONTEXTUALIZAÇÃO</p>
                            <h2 class="text-4xl font-bold mb-6 text-[var(--text-primary)] animate-on-scroll" style="transition-delay: 100ms;">O Cenário para a Mudança</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-left">
                                <div class="bento-card p-6 rounded-xl animate-on-scroll" style="transition-delay: 200ms;">
                                    <div class="w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-3">
                                        <i data-lucide="globe-2" class="w-7 h-7 text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <h3 class="font-bold text-lg text-[var(--text-primary)] mb-1">Contexto Geral</h3>
                                    <p class="text-sm">As transformações sociais e económicas exigem do Estado processos mais eficientes e transparentes.</p>
                                </div>
                                <div class="bento-card p-6 rounded-xl animate-on-scroll" style="transition-delay: 300ms;">
                                    <div class="w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-3">
                                        <i data-lucide="file-text" class="w-7 h-7 text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <h3 class="font-bold text-lg text-[var(--text-primary)] mb-1">Política de Simplificação</h3>
                                    <p class="text-sm">O Decreto nº 47.441/2018 estabeleceu o mandato para simplificar a administração pública estadual.</p>
                                </div>
                                <div class="bento-card p-6 rounded-xl animate-on-scroll" style="transition-delay: 400ms;">
                                    <div class="w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-3">
                                        <i data-lucide="scale" class="w-7 h-7 text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <h3 class="font-bold text-lg text-[var(--text-primary)] mb-1">Liberdade Econômica</h3>
                                    <p class="text-sm">A Lei Nº 13.874/2019 criou um ambiente propício à desburocratização e ao livre mercado.</p>
                                </div>
                                 <div class="bento-card p-6 rounded-xl animate-on-scroll" style="transition-delay: 500ms;">
                                    <div class="w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-3">
                                        <i data-lucide="shield-check" class="w-7 h-7 text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <h3 class="font-bold text-lg text-[var(--text-primary)] mb-1">Organização da VISA</h3>
                                    <p class="text-sm">A Resolução RDC Nº 560/2021 orientou a organização das ações de vigilância sanitária no SNVS.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slide 3: Diagnóstico -->
                     <div class="slide">
                        <div class="slide-content">
                            <p class="font-semibold text-[var(--accent-orange)] mb-2 animate-on-scroll">DIAGNÓSTICO</p>
                            <h2 class="text-4xl font-bold mb-6 text-[var(--text-primary)] animate-on-scroll" style="transition-delay: 100ms;">Identificando os Pontos Críticos</h2>
                             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-left">
                                <div class="bento-card p-6 rounded-xl animate-on-scroll" style="transition-delay: 200ms;">
                                    <div class="w-12 h-12 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mb-3">
                                        <i data-lucide="users" class="w-7 h-7 text-orange-600 dark:text-orange-400"></i>
                                    </div>
                                    <h3 class="font-bold text-lg text-[var(--text-primary)] mb-1">Equipe Insuficiente</h3>
                                    <p class="text-sm">Capacidade limitada de atendimento nos níveis central e regional.</p>
                                </div>
                                <div class="bento-card p-6 rounded-xl animate-on-scroll" style="transition-delay: 300ms;">
                                     <div class="w-12 h-12 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mb-3">
                                        <i data-lucide="clock" class="w-7 h-7 text-orange-600 dark:text-orange-400"></i>
                                    </div>
                                    <h3 class="font-bold text-lg text-[var(--text-primary)] mb-1">Controle de Prazos</h3>
                                    <p class="text-sm">Dificuldade no acompanhamento manual de prazos e indicadores.</p>
                                </div>
                                <div class="bento-card p-6 rounded-xl animate-on-scroll" style="transition-delay: 400ms;">
                                    <div class="w-12 h-12 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mb-3">
                                        <i data-lucide="server-off" class="w-7 h-7 text-orange-600 dark:text-orange-400"></i>
                                    </div>
                                    <h3 class="font-bold text-lg text-[var(--text-primary)] mb-1">Sistemas Isolados</h3>
                                    <p class="text-sm">Falta de sistema integrado, com processos dependentes de planilhas.</p>
                                </div>
                                 <div class="bento-card p-6 rounded-xl animate-on-scroll" style="transition-delay: 500ms;">
                                     <div class="w-12 h-12 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mb-3">
                                        <i data-lucide="lock" class="w-7 h-7 text-orange-600 dark:text-orange-400"></i>
                                    </div>
                                    <h3 class="font-bold text-lg text-[var(--text-primary)] mb-1">Acesso Fragmentado</h3>
                                    <p class="text-sm">Dificuldades no acesso aos serviços.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slide 4: Metodologia -->
                    <div class="slide">
                        <div class="slide-content">
                            <p class="font-semibold text-[var(--accent-blue)] mb-2 animate-on-scroll">METODOLOGIA</p>
                            <h2 class="text-4xl font-bold mb-6 text-[var(--text-primary)] animate-on-scroll" style="transition-delay: 100ms;">A Nossa Abordagem Estratégica</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="bento-card p-6 text-center rounded-xl animate-on-scroll" style="transition-delay: 200ms;">
                                    <div class="bg-blue-100 dark:bg-blue-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <i data-lucide="refresh-cw" class="w-8 h-8 text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <h3 class="font-bold text-xl text-[var(--text-primary)] mb-2">Metodologia Ágil</h3>
                                    <p class="text-sm">Scrum e Kanban para desenvolvimento flexível, com entregas rápidas e contínuas de valor.</p>
                                </div>
                                <div class="bento-card p-6 text-center rounded-xl animate-on-scroll" style="transition-delay: 300ms;">
                                    <div class="bg-blue-100 dark:bg-blue-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <i data-lucide="waves" class="w-8 h-8 text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <h3 class="font-bold text-xl text-[var(--text-primary)] mb-2">Planejamento em Ondas</h3>
                                    <p class="text-sm">Implementação progressiva focada em áreas e funcionalidades prioritárias para maximizar o impacto.</p>
                                </div>
                                <div class="bento-card p-6 text-center rounded-xl animate-on-scroll" style="transition-delay: 400ms;">
                                     <div class="bg-blue-100 dark:bg-blue-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <i data-lucide="link" class="w-8 h-8 text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <h3 class="font-bold text-xl text-[var(--text-primary)] mb-2">Integrações Sistêmicas</h3>
                                    <p class="text-sm">Conexão com SEI!MG, Gov.br, SEF/MG e JUCEMG para um fluxo de dados coeso e automatizado.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 5: Telas da Aplicação 1 -->
                    <div class="slide">
                        <div class="slide-content">
                            <p class="font-semibold text-[var(--accent-blue)] mb-2 animate-on-scroll">A PLATAFORMA</p>
                            <h2 class="text-4xl font-bold mb-6 text-[var(--text-primary)] animate-on-scroll" style="transition-delay: 100ms;">Acesso e Serviços</h2>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                                <div class="animate-on-scroll" style="transition-delay: 200ms;">
                                    <h3 class="font-bold text-lg mb-2 text-[var(--text-secondary)]">Tela de Abertura</h3>
                                    <img src="https://raw.githubusercontent.com/leonardomverona/visa-digital/main/Tela%20Abertura.png" alt="Tela de Abertura do VISA Digital" class="rounded-xl shadow-lg">
                                </div>
                                <div class="animate-on-scroll" style="transition-delay: 300ms;">
                                    <h3 class="font-bold text-lg mb-2 text-[var(--text-secondary)]">Tela Inicial</h3>
                                    <img src="https://raw.githubusercontent.com/leonardomverona/visa-digital/main/Tela%20Inicial.png" alt="Tela Inicial do VISA Digital" class="rounded-xl shadow-lg">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 6: Telas da Aplicação 2 -->
                    <div class="slide">
                        <div class="slide-content">
                            <p class="font-semibold text-[var(--accent-blue)] mb-2 animate-on-scroll">A PLATAFORMA</p>
                            <h2 class="text-4xl font-bold mb-6 text-[var(--text-primary)] animate-on-scroll" style="transition-delay: 100ms;">Acompanhamento e Emissão</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                                <div class="animate-on-scroll" style="transition-delay: 200ms;">
                                    <h3 class="font-bold text-lg mb-2 text-[var(--text-secondary)]">Consulta de Status</h3>
                                    <img src="https://raw.githubusercontent.com/leonardomverona/visa-digital/main/Staus.png" alt="Tela de Status do VISA Digital" class="rounded-xl shadow-lg">
                                </div>
                                <div class="animate-on-scroll" style="transition-delay: 300ms;">
                                    <h3 class="font-bold text-lg mb-2 text-[var(--text-secondary)]">Emissão de Alvará</h3>
                                    <img src="https://raw.githubusercontent.com/leonardomverona/visa-digital/main/Alvara%CC%81.png" alt="Tela de Alvará do VISA Digital" class="rounded-xl shadow-lg">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 7: Resultados -->
                    <div class="slide">
                        <div class="slide-content">
                            <p class="font-semibold text-[var(--accent-green)] mb-2 animate-on-scroll">RESULTADOS</p>
                            <h2 class="text-4xl font-bold mb-6 text-[var(--text-primary)] animate-on-scroll" style="transition-delay: 100ms;">Impacto Mensurável</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div class="bento-card p-6 animate-on-scroll" style="transition-delay: 200ms;">
                                    <h3 class="font-bold text-xl mb-2 text-left text-[var(--accent-green)]">Módulo de Projetos (RAPA)</h3>
                                    <div class="h-48">
                                        <canvas id="statusProjetosChart"></canvas>
                                    </div>
                                    <p class="text-sm text-center mt-4"><strong>2.509</strong> solicitações com <strong>100%</strong> de adesão das URS.</p>
                                </div>
                                 <div class="bento-card p-6 animate-on-scroll" style="transition-delay: 300ms;">
                                     <h3 class="font-bold text-xl mb-2 text-left text-[var(--accent-blue)]">Módulo de Alvarás Sanitários</h3>
                                    <div class="h-48">
                                        <canvas id="statusAlvarasChart"></canvas>
                                    </div>
                                     <p class="text-sm text-center mt-4"><strong>1.650</strong> solicitações e <strong>795</strong> alvarás emitidos digitalmente.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 8: Conclusão -->
                    <div class="slide">
                        <div class="slide-content">
                             <div class="w-16 h-16 rounded-full bg-gradient-to-br from-green-400 via-blue-500 to-orange-500 flex items-center justify-center mx-auto mb-6 animate-on-scroll">
                                <i data-lucide="rocket" class="w-9 h-9 text-white"></i>
                            </div>
                            <h1 class="text-5xl font-extrabold mb-4 text-[var(--text-primary)] animate-on-scroll" style="transition-delay: 100ms;">O Futuro é Agora.</h1>
                            <p class="text-xl max-w-3xl text-[var(--text-secondary)] mx-auto animate-on-scroll" style="transition-delay: 200ms;">O VISA Digital é mais que uma ferramenta; é um marco na transformação da saúde pública de Minas Gerais, reafirmando o nosso compromisso com a inovação, a eficiência e, acima de tudo, com o cidadão.</p>
                            <p class="mt-8 text-lg font-semibold text-[var(--text-primary)] animate-on-scroll" style="transition-delay: 300ms;">Obrigado!</p>
                        </div>
                    </div>

                </div>
                 <div class="absolute bottom-4 right-6 z-0">
                    <img src="https://raw.githubusercontent.com/leonardomverona/visa-digital/main/governo%2Bsus_VETOR-branco-01.svg" alt="Logo Governo e SUS" class="h-12 logo-gov-footer">
                </div>
            </div>
        </main>
        
        <footer class="absolute bottom-0 left-0 right-0 z-20">
            <div class="toolbar flex-shrink-0 p-3 mx-4 mb-4 rounded-xl shadow-lg">
                <div class="flex justify-between items-center w-full max-w-6xl mx-auto">
                    <div class="flex items-center gap-2">
                        <button id="theme-toggle" class="toolbar-btn p-2 rounded-lg" title="Alternar tema">
                            <i data-lucide="sun" class="w-5 h-5 theme-icon-light"></i>
                            <i data-lucide="moon" class="w-5 h-5 theme-icon-dark hidden"></i>
                        </button>
                        <button id="fullscreen-toggle" class="toolbar-btn p-2 rounded-lg" title="Tela cheia">
                            <i data-lucide="maximize" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <div class="flex items-center gap-4">
                        <button id="prev" class="toolbar-btn p-3 rounded-full" title="Anterior">
                            <i data-lucide="arrow-left" class="w-5 h-5"></i>
                        </button>
                        <div id="slide-counter" class="text-sm font-medium text-[var(--text-primary)]">1 / 8</div>
                        <button id="next" class="toolbar-btn p-3 rounded-full" title="Próximo">
                           <i data-lucide="arrow-right" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <div class="flex items-center gap-2">
                         <button id="zoom-out" class="toolbar-btn p-2 rounded-lg" title="Diminuir zoom">
                            <i data-lucide="zoom-out" class="w-5 h-5"></i>
                        </button>
                        <button id="zoom-in" class="toolbar-btn p-2 rounded-lg" title="Aumentar zoom">
                            <i data-lucide="zoom-in" class="w-5 h-5"></i>
                        </button>
                    </div>
                </div>
                 <div class="w-full bg-black/10 dark:bg-white/10 rounded-full h-1 mt-2">
                    <div id="progress-bar" class="bg-[var(--accent-green)] h-1 rounded-full transition-all duration-300 ease-out"></div>
                </div>
            </div>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const appContainer = document.getElementById('app-container');
            const presentationShell = document.getElementById('presentation-shell');
            const viewport = document.getElementById('presentation-viewport');
            const slides = document.querySelectorAll('.slide');
            const prevButton = document.getElementById('prev');
            const nextButton = document.getElementById('next');
            const slideCounter = document.getElementById('slide-counter');
            const progressBar = document.getElementById('progress-bar');
            const themeToggle = document.getElementById('theme-toggle');
            const fullscreenToggle = document.getElementById('fullscreen-toggle');
            const zoomInButton = document.getElementById('zoom-in');
            const zoomOutButton = document.getElementById('zoom-out');
            const govLogo = document.querySelector('.logo-gov-footer');

            let currentSlide = 0;
            const totalSlides = slides.length;
            let projetosChart, alvarasChart;
            let manualZoom = 1;

            function updateScale() {
                const baseWidth = 1280;
                const baseHeight = 720;
                const viewportWidth = viewport.clientWidth;
                const viewportHeight = viewport.clientHeight;
                const scale = Math.min(viewportWidth / baseWidth, viewportHeight / baseHeight);
                presentationShell.style.transform = `scale(${scale * manualZoom})`;
            }

            function updateUI() {
                slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;
                const progressPercentage = (currentSlide / (totalSlides - 1)) * 100;
                progressBar.style.width = `${progressPercentage}%`;
                prevButton.disabled = currentSlide === 0;
                nextButton.disabled = currentSlide === totalSlides - 1;
                lucide.createIcons();
            }
            
            function showSlide(index) {
                if (index < 0 || index >= totalSlides) return;
                
                slides[currentSlide].classList.remove('active');
                slides[index].classList.add('active');
                
                currentSlide = index;
                updateUI();
                
                if (index === 6) { 
                    renderProjetosChart();
                    renderAlvarasChart();
                }
            }
            
            function applyTheme(theme) {
                const isDark = theme === 'dark';
                document.documentElement.classList.toggle('dark', isDark);
                document.body.classList.toggle('dark', isDark);
                document.querySelector('.theme-icon-light').classList.toggle('hidden', isDark);
                document.querySelector('.theme-icon-dark').classList.toggle('hidden', !isDark);
                govLogo.style.filter = isDark ? 'none' : 'invert(1)';

                if (projetosChart) renderProjetosChart();
                if (alvarasChart) renderAlvarasChart();
            }
            
            themeToggle.addEventListener('click', () => {
                const newTheme = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
                localStorage.setItem('presentationTheme', newTheme);
                applyTheme(newTheme);
            });

            fullscreenToggle.addEventListener('click', () => {
                if (!document.fullscreenElement) {
                    appContainer.requestFullscreen().catch((err) => {
                        console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                    });
                } else {
                    if(document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                }
            });
             document.addEventListener('fullscreenchange', () => {
                setTimeout(updateScale, 100);
            });
            
            zoomInButton.addEventListener('click', () => {
                manualZoom = Math.min(2.5, manualZoom + 0.1);
                updateScale();
            });

            zoomOutButton.addEventListener('click', () => {
                manualZoom = Math.max(0.5, manualZoom - 0.1);
                updateScale();
            });

            nextButton.addEventListener('click', () => showSlide(currentSlide + 1));
            prevButton.addEventListener('click', () => showSlide(currentSlide - 1));

            document.addEventListener('keydown', (e) => {
                if (['INPUT', 'TEXTAREA'].includes(e.target.tagName)) return;
                if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextButton.click(); } 
                else if (e.key === 'ArrowLeft') { e.preventDefault(); prevButton.click(); }
            });

            const getChartOptions = (isDark) => {
                 const labelColor = isDark ? '#a0aec0' : '#4a5568';
                 return {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { 
                            position: 'right',
                            labels: {
                                color: labelColor,
                                boxWidth: 15,
                                padding: 15,
                            }
                        }
                    },
                    cutout: '70%',
                };
            };
            
            function renderProjetosChart() {
                const ctx = document.getElementById('statusProjetosChart');
                if (!ctx) return;
                if (projetosChart) projetosChart.destroy();
                const isDark = document.documentElement.classList.contains('dark');
                
                projetosChart = new Chart(ctx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Aprovado', 'Indeferido', 'Em Análise', 'Outros'],
                        datasets: [{
                            data: [412, 599, 585, 336 + 407 + 122 + 68],
                            backgroundColor: [
                                'rgba(0, 168, 89, 0.7)',
                                'rgba(239, 68, 68, 0.7)',
                                'rgba(243, 146, 0, 0.7)',
                                'rgba(107, 114, 128, 0.7)',
                            ],
                            borderColor: isDark ? '#0f172a' : '#f0f7ff',
                            borderWidth: 4,
                        }]
                    },
                    options: getChartOptions(isDark)
                });
            }

            function renderAlvarasChart() {
                const ctx = document.getElementById('statusAlvarasChart');
                if (!ctx) return;
                if (alvarasChart) alvarasChart.destroy();
                const isDark = document.documentElement.classList.contains('dark');

                alvarasChart = new Chart(ctx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Deferido', 'Indeferido', 'Em Análise/Inspeção', 'Outros'],
                        datasets: [{
                            data: [795, 762, 73 + 295, 50 + 63],
                             backgroundColor: [
                                'rgba(0, 119, 192, 0.7)',
                                'rgba(239, 68, 68, 0.7)',
                                'rgba(243, 146, 0, 0.7)',
                                'rgba(107, 114, 128, 0.7)',
                            ],
                             borderColor: isDark ? '#0f172a' : '#f0f4f8',
                             borderWidth: 4,
                        }]
                    },
                    options: getChartOptions(isDark)
                });
            }

            const savedTheme = localStorage.getItem('presentationTheme');
            applyTheme(savedTheme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'));
            showSlide(0);
            updateScale();
            window.addEventListener('resize', updateScale);

        });
    </script>
</body>
</html>
