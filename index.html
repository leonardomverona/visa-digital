<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>VISA Digital - Classificação de Risco e Competência de Fiscalização Sanitária</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Select2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <style>
    :root {
      --primary-color: #003087;
      --secondary-color: #00AEEF;
      --background-color: #f8f9fa;
      --text-color: #333;
      --transition-speed: 0.3s;
      --progress-height: 8px;
    }
    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    header, footer, main {
      padding: 0 20px;
    }
    /* Navbar */
    .navbar {
      background-color: var(--primary-color);
    }
    .navbar-brand, .nav-link {
      color: #fff !important;
    }
    .navbar.sticky-top {
      box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    }
    /* Progress Bar */
    .progress-container {
      height: var(--progress-height);
      background: #ddd;
      margin: 0 20px 20px;
      border-radius: 4px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: var(--secondary-color);
      transition: width var(--transition-speed) ease-in-out;
    }
    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: #fff;
      padding: 140px 20px;
      text-align: center;
      margin-bottom: 40px;
    }
    .hero h1 {
      font-size: 3.75rem;
      font-weight: 700;
      margin-bottom: 20px;
    }
    .hero p {
      font-size: 1.3rem;
      margin-bottom: 40px;
    }
    .hero .hero-icon {
      font-size: 5rem;
      margin-bottom: 20px;
      color: rgba(255,255,255,0.8);
    }
    .btn-cta {
      background-color: var(--secondary-color);
      border: none;
      padding: 15px 30px;
      font-size: 1.1rem;
      border-radius: 5px;
      transition: background-color var(--transition-speed);
      color: #fff;
      text-decoration: none;
    }
    .btn-cta:hover, .btn-cta:focus {
      background-color: #0077b6;
    }
    /* Content Sections */
    main {
      padding: 80px 0;
    }
    .content-section {
      margin-bottom: 60px;
    }
    .content-section h2 {
      color: var(--primary-color);
      font-weight: 700;
      margin-bottom: 20px;
    }
    .content-section p {
      font-size: 1.1rem;
      margin-bottom: 20px;
    }
    /* Steps */
    .step {
      display: none;
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      margin-bottom: 40px;
      animation: fadeIn 0.5s;
    }
    .step.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .step h3 {
      border-bottom: 2px solid var(--primary-color);
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    .form-label {
      margin-bottom: 0.5rem;
    }
    .form-control, .form-select {
      padding: 0.75rem 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .btn-custom {
      background-color: var(--secondary-color);
      color: #fff;
      border: none;
      transition: background-color var(--transition-speed);
      padding: 10px 20px;
      border-radius: 5px;
    }
    .btn-custom:hover, .btn-custom:focus {
      background-color: #0077b6;
    }
    /* CNAE Rows */
    .cnae-row {
      padding: 20px;
      border: 1px solid #dee2e6;
      border-radius: 5px;
      margin-bottom: 20px;
      background: #fafafa;
    }
    .question-block {
      margin-bottom: 15px;
    }
    /* Resultado */
    .result ul {
      padding-left: 0;
      margin: 0;
    }
    .result li {
      list-style: none;
      padding: 8px 0;
      border-bottom: 1px dashed #ddd;
    }
    .result {
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      border: 2px solid var(--primary-color);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    footer {
      background-color: var(--primary-color);
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    /* Select2 Custom */
    .select2-container .select2-selection--single {
      height: 38px;
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    @media (max-width: 576px) {
      .hero h1 { font-size: 2.75rem; }
      .hero p { font-size: 1.1rem; }
    }
  </style>
</head>
<body>
  <!-- Cabeçalho -->
  <header>
    <nav class="navbar sticky-top navbar-expand-lg" role="navigation" aria-label="Navegação Principal">
      <div class="container">
        <a class="navbar-brand" href="#">VISA Digital</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" 
          aria-controls="navbarContent" aria-expanded="false" aria-label="Alternar navegação">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarContent">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="#home">Início</a></li>
            <li class="nav-item"><a class="nav-link" href="#sobre">Sobre</a></li>
            <li class="nav-item"><a class="nav-link" href="#flow">Serviço</a></li>
            <li class="nav-item"><a class="nav-link" href="#contato">Contato</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="progress-container">
      <div id="progressBar" class="progress-bar"></div>
    </div>
  </header>
  
  <main>
    <!-- Seção Hero -->
    <section id="home" class="hero" aria-label="Página Inicial">
      <div class="container">
        <div class="hero-icon" aria-hidden="true">
          <i class="fas fa-shield-alt"></i>
        </div>
        <h1>Licenciamento Sanitário</h1>
        <p>Classificação de Risco e Competência de Fiscalização em Minas Gerais</p>
        <a href="#flow" class="btn btn-cta">Iniciar</a>
      </div>
    </section>
    
    <!-- Seção Sobre -->
    <section id="sobre" class="content-section" aria-label="Sobre o Serviço">
      <div class="container">
        <h2>Onde requerer seu licenciamento sanitário?</h2>
        <p style="text-align: justify;">
          O VISA Digital centraliza o acesso ao Licenciamento Sanitário em Minas Gerais. O sistema classifica o risco do seu estabelecimento e, conforme a legislação estadual, orienta a competência da fiscalização e o caminho para a solicitação do alvará sanitário.
        </p>
      </div>
    </section>
    
    <!-- Fluxo de Licenciamento -->
    <section id="flow" class="content-section" aria-label="Fluxo de Licenciamento">
      <div class="container">
        <!-- Step 1: Dados do Estabelecimento e CNAEs -->
        <div id="step1" class="step active">
          <h3>Dados do Estabelecimento</h3>
          <form id="riskForm" novalidate>
            <script>
              function updateProgress(percent) {
                document.getElementById("progressBar").style.width = percent + "%";
              }
              updateProgress(20);
            </script>
            <div class="row mb-4">
              <div class="col-md-6">
                <label class="form-label">Tipo de Cadastro:</label>
                <div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="tipoCadastro" id="cadPF" value="PF" checked onchange="atualizarDocLabel()">
                    <label class="form-check-label" for="cadPF">Pessoa Física</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="tipoCadastro" id="cadPJ" value="PJ" onchange="atualizarDocLabel()">
                    <label class="form-check-label" for="cadPJ">Pessoa Jurídica</label>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Tipo de Concessão:</label>
                <div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="tipoConcessao" id="concessaoInicial" value="Inicial" checked>
                    <label class="form-check-label" for="concessaoInicial">Concessão Inicial</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="tipoConcessao" id="concessaoRenovacao" value="Renovacao">
                    <label class="form-check-label" for="concessaoRenovacao">Renovação</label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Dados Básicos -->
            <div class="row mb-4">
              <div class="col-md-4">
                <label id="docLabel" for="doc" class="form-label">CPF:</label>
                <input type="text" id="doc" class="form-control" placeholder="000.000.000-00" required>
              </div>
              <div class="col-md-4">
                <label for="razao" class="form-label">Razão Social:</label>
                <input type="text" id="razao" class="form-control" required>
              </div>
              <div class="col-md-4">
                <label for="nome_fantasia" class="form-label">Nome Fantasia:</label>
                <input type="text" id="nome_fantasia" class="form-control" required>
              </div>
            </div>
            
            <!-- Natureza Jurídica -->
            <div class="row mb-4">
              <div class="col-md-4">
                <label for="natureza" class="form-label">Natureza Jurídica:</label>
                <select id="natureza" class="form-select" required>
                  <option value="">-- Selecione --</option>
                  <option value="Privado">Privado</option>
                  <option value="Publico">Público</option>
                  <option value="Filantropico">Filantrópico</option>
                  <option value="Outros">Outros</option>
                </select>
              </div>
            </div>
            
            <!-- Seleção de CNAEs -->
            <div class="mb-4">
              <h5>CNAEs</h5>
              <p>Selecione (ou digite para filtrar) as atividades econômicas para as quais o alvará será requerido.</p>
              <div id="cnaesContainer"></div>
              <button type="button" class="btn btn-custom" onclick="adicionarCNAE()" aria-label="Adicionar CNAE">
                <i class="fas fa-plus"></i> Adicionar CNAE
              </button>
            </div>

            <!-- Seleção de Município -->
            <div class="row mb-4">
              <div class="col-md-6">
                <label for="municipio" class="form-label">Município:</label>
                <select id="municipio" class="form-select" required>
                  <option value="">-- Selecione --</option>
                </select>
              </div>
            </div>

            <div class="d-flex justify-content-end">
              <button type="button" class="btn btn-custom" onclick="calcularRisco(); updateProgress(100); nextStep(2);" aria-label="Enviar Dados">
                Enviar <i class="fas fa-arrow-right"></i>
              </button>
            </div>
          </form>
        </div>
        
        <!-- Step 2: Resultado -->
        <div id="step2" class="step">
          <h3>Resultado</h3>
          <div id="resultado" class="result">
            <p><strong>Razão Social:</strong> <span id="resRazao"></span></p>
            <p><strong>Nome Fantasia:</strong> <span id="resNomeFantasia"></span></p>
            <p><strong>CNPJ/CPF:</strong> <span id="resDoc"></span></p>
            <p><strong>CNAEs:</strong> <span id="resCNAEs"></span></p>
            <p><strong>Nível de Risco:</strong> <span id="resRisco"></span></p>
            <p><strong>Orientações:</strong> <span id="resOrientacoes"></span></p>
          </div>
          <div class="text-center mt-4">
            <button type="button" class="btn btn-custom" onclick="reiniciarFluxo()" aria-label="Reiniciar Fluxo">
              Reiniciar Fluxo <i class="fas fa-redo"></i>
            </button>
          </div>
        </div>
        
      </div>
    </section>
  </main>
  
  <footer role="contentinfo">
    <div class="container">
      <p>&copy; 2025 VISA Digital. Todos os direitos reservados.</p>
    </div>
  </footer>

  <!-- jQuery, jQuery Mask, Select2 e Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Integração Firebase + Carregamento de CNAEs, Pactuação e Municípios -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js';
    import { getFirestore, collection, getDocs } from 'https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js';

    // Configuração Firebase
    const firebaseConfig = {
      apiKey: 'AIzaSy...',
      authDomain: 'visa-digital-db.firebaseapp.com',
      projectId: 'visa-digital-db',
      storageBucket: 'visa-digital-db.appspot.com',
      messagingSenderId: '105425274823',
      appId: '1:105425274823:web:57322773683e99334cfbe2'
    };
    
    // Inicializa Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Arrays globais que serão carregados do Firestore
    let cnaesData = [];
    let jucemgMunicipios = [];
    const municipiosPact = {};

    // Carregar coleções do Firestore
    async function loadCollections() {
      try {
        // 1) Carrega CNAEs
        const cnaeSnapshot = await getDocs(collection(db, 'cnaes'));
        cnaeSnapshot.forEach(doc => {
          cnaesData.push(doc.data());
        });
        // Ordena cnaesData em ordem alfabética pelo campo "description"
        cnaesData.sort((a, b) => a.description.localeCompare(b.description));

        // 2) Carrega jucemgMunicipios
        const jucemgSnapshot = await getDocs(collection(db, 'jucemgMunicipios'));
        jucemgSnapshot.forEach(doc => {
          const data = doc.data();
          jucemgMunicipios.push(data.nome);
        });
        // Ordena jucemgMunicipios em ordem alfabética
        jucemgMunicipios.sort((a, b) => a.localeCompare(b));

        // 3) Carrega Pactuação de Municípios
        const pactSnapshot = await getDocs(collection(db, 'municipios'));
        pactSnapshot.forEach(doc => {
          let data = doc.data();
          const nomeMunicipio = data.nome;
          municipiosPact[nomeMunicipio] = data.pact;
        });

        popularMunicipios();
      } catch (err) {
        console.error('Erro ao carregar dados do Firestore:', err);
      }
    }

    function popularMunicipios() {
      const municipioSelect = document.getElementById('municipio');
      // Cria um array a partir das chaves do objeto e ordena
      const sortedMunicipios = Object.keys(municipiosPact).sort((a, b) => a.localeCompare(b));
      for (const mun of sortedMunicipios) {
        const opt = document.createElement('option');
        opt.value = mun;
        opt.textContent = mun;
        municipioSelect.appendChild(opt);
      }
      $('#municipio').select2({
        width: '100%',
        placeholder: '-- Selecione um Município --',
        allowClear: true
      });
    }

    loadCollections();

    let cnaeCount = 0;

    window.atualizarDocLabel = function() {
      const tipo = document.querySelector('input[name="tipoCadastro"]:checked').value;
      const docLabel = document.getElementById('docLabel');
      const docInput = $('#doc');
      if (tipo === 'PJ') {
        docLabel.innerText = 'CNPJ:';
        docInput.attr('placeholder', '00.000.000/0000-00');
        docInput.unmask().mask('00.000.000/0000-00');
      } else {
        docLabel.innerText = 'CPF:';
        docInput.attr('placeholder', '000.000.000-00');
        docInput.unmask().mask('000.000.000-00');
      }
    };

    window.adicionarCNAE = function() {
      cnaeCount++;
      const container = document.getElementById('cnaesContainer');
      const div = document.createElement('div');
      div.className = 'cnae-row';
      div.id = 'cnaeRow_' + cnaeCount;

      let selectHTML = '<label>CNAE:</label>';
      selectHTML += `<select onchange="verificarCNAE(this, ${cnaeCount})" id="cnaeSelect_${cnaeCount}" class="form-select mb-2">`;
      selectHTML += '<option value=""></option>';
      
      const cnaesUnicos = {};
      cnaesData.forEach(c => {
        cnaesUnicos[c.code] = c.description;
      });
      for (const code in cnaesUnicos) {
        selectHTML += `<option value="${code}">${code} - ${cnaesUnicos[code]}</option>`;
      }
      selectHTML += '</select>';
      div.innerHTML = selectHTML;

      const questionsContainer = document.createElement('div');
      questionsContainer.id = 'questionsContainer_' + cnaeCount;
      questionsContainer.style.display = 'none';
      div.appendChild(questionsContainer);

      const removeBtn = document.createElement('button');
      removeBtn.type = 'button';
      removeBtn.className = 'btn btn-danger mt-2';
      removeBtn.innerHTML = '<i class="fas fa-trash"></i> Remover CNAE';
      removeBtn.onclick = function() {
        if (confirm('Deseja realmente remover este CNAE?')) {
          removerCNAE(div.id);
        }
      };
      div.appendChild(removeBtn);

      container.appendChild(div);
      initSelect2(`cnaeSelect_${cnaeCount}`);
    };

    window.removerCNAE = function(id) {
      document.getElementById(id).remove();
    };

    window.verificarCNAE = function(selectElem, uniqueId) {
      const selectedCode = selectElem.value;
      const cnae = cnaesData.find(item => item.code === selectedCode);
      const questionsContainer = document.getElementById('questionsContainer_' + uniqueId);
      if (cnae && cnae.questions && cnae.questions.length > 0) {
        questionsContainer.innerHTML = gerarPerguntas(cnae, uniqueId);
        questionsContainer.style.display = 'block';
      } else {
        questionsContainer.style.display = 'none';
      }
    };

    function gerarPerguntas(cnae, uniqueId) {
      let html = '';
      cnae.questions.forEach((pergunta, index) => {
        let displayStyle = (index === 0) ? 'block' : 'none';
        let onchangeAttr = '';
        if (index === 0 && cnae.questions.length > 1) {
          onchangeAttr = ` onchange="verificarRespostaEncadeada(this, '${uniqueId}', ${index})"`;
        }
        html += `<div class="question-block" id="question_${uniqueId}_${index}" style="display:${displayStyle};">`;
        html += `<p class="mb-1 fw-bold">${pergunta.text}</p>`;
        pergunta.options.forEach(option => {
          html += `<label class="form-check-label me-2">
                      <input type="radio" name="q_${uniqueId}_${index}" value="${option.value}" ${onchangeAttr}> ${option.value}
                   </label>`;
        });
        html += `</div>`;
      });
      return html;
    }

    window.verificarRespostaEncadeada = function(radioElem, uniqueId, questionIndex) {
      if (questionIndex === 0) {
        if (radioElem.value === 'NÃO') {
          $(`#question_${uniqueId}_1`).fadeIn(300);
        } else {
          $(`#question_${uniqueId}_1`).fadeOut(300, function(){
            $(this).find('input').prop('checked', false);
          });
        }
      }
    };

    function initSelect2(id) {
      $(`#${id}`).select2({
        width: '100%',
        placeholder: '-- Selecione --',
        allowClear: true,
        minimumResultsForSearch: 0
      });
    }

    window.calcularRisco = function() {
      const doc = $('#doc').val().trim();
      const razao = $('#razao').val().trim();
      const nomeFantasia = $('#nome_fantasia').val().trim();
      const municipio = $('#municipio').val();

      if (!doc || !razao || !nomeFantasia || !municipio) {
        alert('Preencha todos os campos obrigatórios.');
        return;
      }

      const cnaeRows = $('.cnae-row');
      if (cnaeRows.length === 0) {
        alert('Adicione ao menos um CNAE.');
        return;
      }

      let overallRisk = 1; // 1 = Nível I, 2 = Nível II, 3 = Nível III
      let cnaesListHTML = "<ul class='list-unstyled'>";
      let valid = true;

      cnaeRows.each(function() {
        const uniqueId = this.id.split('_')[1];
        const selectElem = $(this).find(`select[id^='cnaeSelect_']`);
        const cnaeCode = selectElem.val();
        if (!cnaeCode) return;
        const cnae = cnaesData.find(item => item.code === cnaeCode);
        let riscoCNAE = 0;

        if (cnae.questions && cnae.questions.length > 1) {
          const answer1 = $(this).find(`input[name="q_${uniqueId}_0"]:checked`).val();
          if (!answer1) {
            alert("Responda a pergunta: '" + cnae.questions[0].text + "' para o CNAE " + cnae.code);
            valid = false;
            return false;
          }
          if (answer1 === 'SIM') {
            riscoCNAE = cnae.questions[0].options.find(opt => opt.value === 'SIM').risk;
          } else {
            const answer2 = $(this).find(`input[name="q_${uniqueId}_1"]:checked`).val();
            if (!answer2) {
              alert("Responda a pergunta: '" + cnae.questions[1].text + "' para o CNAE " + cnae.code);
              valid = false;
              return false;
            }
            riscoCNAE = cnae.questions[1].options.find(opt => opt.value === answer2).risk;
          }
        } else if (cnae.questions && cnae.questions.length === 1) {
          const answer = $(this).find(`input[name="q_${uniqueId}_0"]:checked`).val();
          if (!answer) {
            alert("Responda a pergunta: '" + cnae.questions[0].text + "' para o CNAE " + cnae.code);
            valid = false;
            return false;
          }
          riscoCNAE = cnae.questions[0].options.find(opt => opt.value === answer).risk;
        } else {
          riscoCNAE = (cnae.code === '2591-8/00') ? 3 : 1;
        }

        if (riscoCNAE > overallRisk) overallRisk = riscoCNAE;
        cnaesListHTML += `<li><strong>${cnae.code}</strong> - ${cnae.description}</li>`;
      });

      if (!valid) return;
      cnaesListHTML += "</ul>";

      const pact = municipiosPact[municipio] || 'A';
      let orientacoes = '';
      if (overallRisk === 1) {
        if (jucemgMunicipios.includes(municipio)) {
          orientacoes = '<a href="https://portalservicos.jucemg.mg.gov.br/auth/realms/Portalservicos/protocol/openid-connect/auth?response_type=code&client_id=licenciamento&redirect_uri=https%3A%2F%2Fportalservicos.jucemg.mg.gov.br%2Flicenciamento-web%2Fpages%2Flicenciamento%2FconsultarLicenciamentoEmpresa.jsf&state=9d714170-4208-424f-96a6-4001df65c6c1&login=true&scope=openid" target="_blank" class="btn btn-custom">Acessar Portal REDESIM MG</a>';
        } else {
          orientacoes = "Procure a Vigilância Sanitária de " + municipio + ".";
        }
      } else if (overallRisk === 2) {
        if (jucemgMunicipios.includes(municipio)) {
          orientacoes = '<a href="https://portalservicos.jucemg.mg.gov.br/auth/realms/Portalservicos/protocol/openid-connect/auth?response_type=code&client_id=licenciamento&redirect_uri=https%3A%2F%2Fportalservicos.jucemg.mg.gov.br%2Flicenciamento-web%2Fpages%2Flicenciamento%2FconsultarLicenciamentoEmpresa.jsf&state=9d714170-4208-424f-96a6-4001df65c6c1&login=true&scope=openid" target="_blank" class="btn btn-custom">Acessar Portal REDESIM MG</a>';
        } else {
          orientacoes = "Procure a Vigilância Sanitária de " + municipio + ".";
        }
      } else {
        if (pact === 'C') {
          orientacoes = "Procure a Vigilância Sanitária de " + municipio + ".";
        } else {
          orientacoes = '<a href="https://visadigital.saude.mg.gov.br/modulo-licenciamento-municipios" target="_blank" class="btn btn-custom">Solicitar Alvará Sanitário no VISA Digital</a>';
        }
      }

      const riscoDescricao = overallRisk === 1 ? "Nível I" : overallRisk === 2 ? "Nível II" : "Nível III";

      $("#resRazao").html(razao);
      $("#resNomeFantasia").html(nomeFantasia);
      $("#resDoc").html(doc);
      $("#resCNAEs").html(cnaesListHTML);
      $("#resRisco").html(riscoDescricao);
      $("#resOrientacoes").html(orientacoes);
    };

    window.reiniciarFluxo = function() {
      location.reload();
    };

    window.nextStep = function(stepNumber) {
      $('.step.active').fadeOut(300, function(){
        $('.step').removeClass('active');
        $('#step' + stepNumber).fadeIn(300).addClass('active');
      });
    };
  </script>
</body>
</html>
